/*
[ê°’ì´ íŠ¹ì • ë²”ìœ„ì— ì†í•˜ëŠ” ì›ì†Œì˜ ê°œìˆ˜ êµ¬í•˜ê¸°]
â€¢ ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ì •ë ¬ëœ ë°°ì—´ì—ì„œ ê°’ì´ íŠ¹ì • ë²”ìœ„ì— í•´ë‹¹í•˜ëŠ” ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ê³„ì‚°í•˜ëŠ” ê²ƒì„
ìš”êµ¬í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆë‹¤.
â€¢ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ğ‘™ğ‘œğ‘¤ğ‘’ğ‘Ÿğµğ‘œğ‘¢ğ‘›ğ‘‘() í•¨ìˆ˜ì™€ ğ‘¢ğ‘ğ‘ğ‘’ğ‘Ÿğµğ‘œğ‘¢ğ‘›ğ‘‘() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
â€¢ ì‹œê°„ ë³µì¡ë„ O(logN)ì„ ìš”êµ¬í•˜ëŠ” ê²½ìš° ì‚¬ìš©ê°€ëŠ¥

ë§Œì•½ 
let arr = [3,4,5,5,5,7,9] ë¼ëŠ” ë°°ì—´ì´ ìˆì„ ë•Œ '5'ë¼ëŠ” ê°’ì´ ëª‡ê°œì¸ì§€ ì•Œê³ ì í•œë‹¤ë©´?
í•˜í•œì„ ê³¼ ìƒí•œì„  í•¨ìˆ˜
â€¢ ğ‘™ğ‘œğ‘¤ğ‘’ğ‘Ÿğµğ‘œğ‘¢ğ‘›ğ‘‘(ğ‘ğ‘Ÿğ‘Ÿ, ğ‘¥): ì •ë ¬ëœ ìˆœì„œë¥¼ ìœ ì§€í•˜ë©´ì„œ ë°°ì—´ ğ‘ğ‘Ÿğ‘Ÿì— ğ‘¥ë¥¼ ë„£ì„ ê°€ì¥ ì™¼ìª½ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜
â€¢ ğ‘¢ğ‘ğ‘ğ‘’ğ‘Ÿğµğ‘œğ‘¢ğ‘›ğ‘‘ ğ‘ğ‘Ÿğ‘Ÿ, ğ‘¥ : ì •ë ¬ëœ ìˆœì„œë¥¼ ìœ ì§€í•˜ë©´ì„œ ë°°ì—´ ğ‘ğ‘Ÿğ‘Ÿì— ğ‘¥ë¥¼ ë„£ì„ ê°€ì¥ ì˜¤ë¥¸ìª½ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜

ğ‘™ğ‘œğ‘¤ğ‘’ğ‘Ÿğµğ‘œğ‘¢ğ‘›ğ‘‘(ğ‘ğ‘Ÿğ‘Ÿ, 5) => idx=2
ğ‘¢ğ‘ğ‘ğ‘’ğ‘Ÿğµğ‘œğ‘¢ğ‘›ğ‘‘( ğ‘ğ‘Ÿğ‘Ÿ, 5 ) => idx=4  
ê³ ë¡œ 4-2 +1 í•˜ë©´ 5ê°€ ëª‡ê°œì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤.

ë¬¸ì œì˜ ë°°ì—´ì„ ë¨¼ì € ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ ì‹œì¼œë†“ëŠ”ë‹¤
*/

// ìœ ì˜: lowerBoundì™€ upperBoundëŠ” end ë³€ìˆ˜ì˜ ê°’ì„ ë°°ì—´ì˜ ê¸¸ì´ë¡œ ì„¤ì •
// ì •ë ¬ëœ ìˆœì„œë¥¼ ìœ ì§€í•˜ë©´ì„œ ë°°ì—´ì— ì‚½ì…í•  ê°€ì¥ ì™¼ìª½ ì¸ë±ìŠ¤ ë°˜í™˜
const lowerBound = (arr, target) => {
  let start = 0;
  let end = arr.length;
  while (start < end) {
    let mid = parseInt((start + end) / 2);
    if (arr[mid] >= target) end = mid; // ìµœëŒ€í•œ ì™¼ìª½ìœ¼ë¡œ ì´ë™í•˜ê¸°
    else start = mid + 1;
  }
  return end;
};
// ì •ë ¬ëœ ìˆœì„œë¥¼ ìœ ì§€í•˜ë©´ì„œ ë°°ì—´ì— ì‚½ì…í•  ê°€ì¥ ì˜¤ë¥¸ìª½ ì¸ë±ìŠ¤ ë°˜í™˜
const upperBound = (arr, target) => {
  let start = 0;
  let end = arr.length;
  while (start < end) {
    let mid = parseInt((start + end) / 2);
    if (arr[mid] > target) end = mid;
    else start = mid + 1; // ìµœëŒ€í•œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ê¸°
  }
  return end;
};

//ğ‘ğ‘œğ‘¢ğ‘›ğ‘¡ğµğ‘¦ğ‘…ğ‘ğ‘›ğ‘”ğ‘’(): ì •ë ¬ëœ ë°°ì—´ì—ì„œ ê°’ì´ íŠ¹ì • ë²”ìœ„ì— ì†í•˜ëŠ” ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ê³„ì‚°í•œë‹¤.
const countByRange = (arr, leftValue, rightValue) => {
  let leftIndex = lowerBound(arr, leftValue);
  let rightIndex = upperBound(arr, rightValue);
  return rightIndex - leftIndex;
};

// ë°°ì—´ ì„ ì–¸
let arr = [1, 2, 3, 3, 3, 3, 4, 4, 8, 9];
// ê°’ì´ 4ì¸ ë°ì´í„° ê°œìˆ˜ ì¶œë ¥
console.log(countByRange(arr, 4, 4));
// ê°’ì´ [-1, 3] ë²”ìœ„ì— ìˆëŠ” ë°ì´í„° ê°œìˆ˜ ì¶œë ¥
console.log(countByRange(arr, -1, 3));
